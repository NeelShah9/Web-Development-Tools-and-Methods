(this["webpackJsonpreact-todo"]=this["webpackJsonpreact-todo"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/spinner.a50cf914.svg"},,function(e,t,a){e.exports=a(17)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),s=(a(15),r.a.createContext({})),l=function(){var e=Object(n.useContext)(s);return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},"AGENDA TRACKER"),r.a.createElement("div",{className:"error-msg"},e.networkError),r.a.createElement("ul",{className:"landing"},e.isLoggedIn&&r.a.createElement("button",{className:"logout action",onClick:function(){e.setLogout()}},"Logout")))},i=function(){var e=Object(n.useContext)(s);Object(n.useEffect)((function(){e.getTheme(e.username)}),[]);return r.a.createElement("select",{className:"theme",value:e.theme,onChange:function(t){var a=t.target.value;e.setTheme(e.username,a)}},r.a.createElement("option",{value:"light"},"Light"),r.a.createElement("option",{value:"dark"},"Dark"),r.a.createElement("option",{value:"colorful"},"Tints"))},u=a(3),d=function(){var e=Object(n.useContext)(s);return r.a.createElement("span",{className:"sort-container"},r.a.createElement("label",{className:"task-sort-label"},"Sort:"),r.a.createElement("span",{className:"select-sort"},r.a.createElement("label",null,"Alphabetically"),r.a.createElement("select",{className:"sort-alphabetically filter-height",value:e.taskOrderFilter,onChange:function(t){e.sortTasksByOrder(t.target.value)}},r.a.createElement("option",{value:"select option",disabled:!0},"Select"),r.a.createElement("option",{value:"ascending"},"Forward"),r.a.createElement("option",{value:"descending"},"Reverse")),r.a.createElement("label",null,"Complete/Pending"),r.a.createElement("select",{className:"sort-by-status filter-height",value:e.taskDoneFilter,onChange:function(t){e.sortTasksByDone(t.target.value)}},r.a.createElement("option",{value:"select option",disabled:!0},"Select"),r.a.createElement("option",{value:"done"},"Complete"),r.a.createElement("option",{value:"notdone"},"Pending"))))},E=function(){var e=Object(n.useContext)(s);return r.a.createElement("div",{className:"filter-todos"},r.a.createElement("span",{className:"filter-container"},r.a.createElement("label",{className:"task-filter-label"},"Filter By:"),r.a.createElement("select",{className:"filter-task filter-height",value:e.taskStatusFilter,onChange:function(t){e.filterTasksByStatus(t.target.value)}},r.a.createElement("option",{value:"all"},"All Tasks"),r.a.createElement("option",{value:"active"},"Active Tasks"),r.a.createElement("option",{value:"complete"},"Complete Tasks"))),r.a.createElement(d,null))},m={DONE:"done",ALL:"all",SELECT:"select option",ACTIVE:"active",COMPLETE:"complete",ASCENDING:"ascending",DESCENDING:"descending",NOTDONE:"notdone",DEFAULT_THEME:"light",TRUE:!0,FALSE:!1},O=function(){var e=Object(n.useContext)(s),t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],o=a[1];Object(n.useEffect)((function(){e.getAllTasks(e.username)}),[]);var l=function(t){e.toggleTodo(t.target.id)},i=function(t){e.deleteTask(t.target.id)},d=function(t){e.updateTask(t.target.id,t.target.value)};return r.a.createElement("div",null,r.a.createElement("div",{className:"todo-container"},r.a.createElement(E,null),r.a.createElement("div",{className:"add-todo-container"},r.a.createElement("input",{className:"todo-input",onChange:function(e){return o(e.target.value)},value:c,type:"text",placeholder:"Enter Tasks"}),r.a.createElement("button",{className:"btn-todo-add",onClick:function(t){t.preventDefault(),e.addNewTask(e.username,c),o("")}},"ADD"),r.a.createElement("button",{className:"btn-refresh",onClick:function(){e.getAllTasks(e.username),e.refreshTasks()}},"Refresh"),r.a.createElement("div",{className:"todo-display"},r.a.createElement("ul",null,Object.values(e.tasks).filter((function(t){return e.taskStatusFilter===m.COMPLETE?t.done===m.TRUE:m.TRUE})).filter((function(t){return e.taskStatusFilter===m.ACTIVE?t.done===m.FALSE:m.TRUE})).map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("input",{id:e.taskId,className:"todo-checkbox",type:"checkbox",checked:e.done?"checked":"",onChange:l}),r.a.createElement("input",{type:"text",id:e.taskId,className:"todo ".concat(e.done?"todo complete":"todo"),value:e.name,onChange:d,contentEditable:"true"}),r.a.createElement("button",{id:e.taskId,className:"task-delete",onClick:i},"DELETE"))})))))))},f=a(8),T=a.n(f),h=function(){var e=Object(n.useContext)(s),t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),i=Object(u.a)(l,2),d=i[0],E=i[1];return r.a.createElement("div",{className:"login"},r.a.createElement("input",{className:"user-info",placeholder:"Enter User name",onChange:function(e){return o(e.target.value)}}),d?r.a.createElement("img",{alt:"spinner",src:T.a}):r.a.createElement("button",{className:"to-login",onClick:function(){E(!0),e.setLoginStatus(c),E(!1)}},"Login"))},k=function(){var e,t=Object(n.useContext)(s);return Object(n.useEffect)((function(){t.getLoginStatus()}),[]),e=t.isLoggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"second-header"},"What is your main agenda today ",t.username.toUpperCase()," ?",r.a.createElement(i,null)),r.a.createElement("p",{className:"error-msg"},t.error),r.a.createElement(O,null)):r.a.createElement(h,null),r.a.createElement("div",null,e)},R=(a(16),function(){var e=Object(n.useContext)(s);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"app ".concat(e.theme?e.theme:"")},r.a.createElement(l,null),r.a.createElement(k,null)))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var p=a(1),g=a(2),b=a(9),S=function(e,t){switch(e=Object(p.a)({},e,{error:"",networkError:""}),t.type){case"GET_SESSION":return t.data.username?Object(p.a)({},e,{isLoggedIn:m.TRUE,username:t.data.username,theme:t.data.theme}):Object(p.a)({},e,{isLoggedIn:m.FALSE});case"SET_SESSION":return Object(p.a)({},e,{username:t.data,isLoggedIn:m.TRUE});case"SET_LOGOUT":return Object(p.a)({},e,{isLoggedIn:m.FALSE,tasks:{},theme:m.DEFAULT_THEME});case"GET_THEME":case"SET_THEME":return Object(p.a)({},e,{theme:t.data});case"GET_TODO":return Object(p.a)({},e,{tasks:t.data});case"SET_TODO":return Object(p.a)({},e,{tasks:Object(p.a)({},e.tasks,Object(g.a)({},t.data.taskId,{name:t.data.name,done:t.data.done,taskId:t.data.taskId}))});case"TOGGLE_TODO":return Object(p.a)({},e,{tasks:Object(p.a)({},e.tasks,Object(g.a)({},t.data.taskId,Object(p.a)({},t.data)))});case"DELETE_TODO":return Object(p.a)({},e,{tasks:t.data});case"UPDATE_TODO":return Object(p.a)({},e,{tasks:Object(p.a)({},e.tasks,Object(g.a)({},t.data.taskId,Object(p.a)({},t.data,{name:t.data.name})))});case"STATUS_FILTER":return Object(p.a)({},e,{taskStatusFilter:t.data});case"ORDER_FILTER":return Object(p.a)({},e,{taskOrderFilter:t.data});case"REFRESH_TASKS":return Object(p.a)({},e,{taskStatusFilter:m.ALL,taskOrderFilter:m.SELECT,taskDoneFilter:m.SELECT});case"DONE_FILTER":return Object(p.a)({},e,{taskDoneFilter:t.data.status,taskStatusFilter:m.ALL,taskOrderFilter:m.SELECT});case"REPORT_ERROR":return Object(p.a)({},e,{error:t.data});case"NETWORK_ERROR":return Object(p.a)({},e,{networkError:t.data,isLoggedIn:m.FALSE});default:return e}},v=function(e){return{code:"NETWORK-ERROR",err:e}},N=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},j=function(e,t,a){return fetch("/tasks/".concat(e,"/").concat(t),{method:"PUT",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({task:a})}).catch(v).then(N)},y={DEFAULT:"Something went wrong, please try again!!!",USERNAME_REQUIRED:"* Username is required",NETWORK_ERROR:"There was a problem reaching your network, please try again!!!",TODO_REQUIRED:"*TODO cannot be empty!","no valid session":"No Session found! Please login again.","login denied":"* Login required to see the content.","action not permitted":"Unauthorized user. Please try valid username!!!","no tasks for user":"No tasks found!!!","no such taskId":"Error! Task does not exist.","failed to update":"Failed to update task! Please enter correct data."},L=function(e){var t={isLoggedIn:!1,username:"",theme:"",tasks:{},taskOrderFilter:m.SELECT,taskStatusFilter:m.ALL,taskDoneFilter:m.SELECT,error:"",networkError:""},a=Object(n.useReducer)(S,t),c=Object(u.a)(a,2),o=c[0],l=c[1],i=function(e){return Object.assign.apply(Object,[{}].concat(Object(b.a)(Object.entries(o.tasks).filter((function(t){return Object(u.a)(t,1)[0]!==e.taskId})).map((function(e){var t=Object(u.a)(e,2),a=t[0],n=t[1];return Object(g.a)({},a,n)})))))},d=function(){return Object.values(o.tasks).sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}))},E=function(){return Object.values(o.tasks).sort((function(e,t){return e.name<t.name?1:e.name>t.name?-1:0}))},O=function(e){return e.reduce((function(e,t){return Object(p.a)({},e,Object(g.a)({},t.taskId,t))}),{})},f=function(){return Object.values(o.tasks).sort((function(e,t){return e.done<t.done?1:e.done>t.done?-1:0}))},T=function(){return Object.values(o.tasks).sort((function(e,t){return e.done<t.done?-1:e.done>t.done?1:0}))};return r.a.createElement(s.Provider,{value:{isLoggedIn:o.isLoggedIn,username:o.username,theme:o.theme,tasks:o.tasks,taskOrderFilter:o.taskOrderFilter,taskStatusFilter:o.taskStatusFilter,taskDoneFilter:o.taskDoneFilter,error:o.error,networkError:o.networkError,getLoginStatus:function(){fetch("/session",{method:"GET"}).catch(v).then(N).then((function(e){l({type:"GET_SESSION",data:e.data})})).catch((function(e){l({type:"NETWORK_ERROR",data:y[e.code]})}))},setLoginStatus:function(e){e?function(e){return fetch("/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:e})}).catch(v).then(N)}(e).then((function(){l({type:"SET_SESSION",data:e})})).catch((function(e){l({type:"NETWORK_ERROR",data:y[e.code]})})):l({type:"NETWORK_ERROR",data:y.USERNAME_REQUIRED})},setTheme:function(e,t){(function(e,t){return fetch("/theme/".concat(e),{method:"PUT",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({theme:t})}).catch(v).then(N)})(e,t).then((function(){l({type:"SET_THEME",data:t})})).catch((function(e){l({type:"REPORT_ERROR",data:y[e.code]})}))},getTheme:function(e){(function(e){return fetch("/theme/".concat(e),{method:"GET"}).catch(v).then(N)})(e).then((function(e){l({type:"GET_THEME",data:e.data})})).catch((function(e){l({type:"REPORT_ERROR",data:y[e.code]})}))},setLogout:function(){fetch("/session",{method:"DELETE"}).catch(v).then(N).then((function(){l({type:"SET_LOGOUT"})})).catch((function(e){l({type:"NETWORK_ERROR",data:y[e.code]})}))},getAllTasks:function(e){(function(e){return fetch("/tasks/".concat(e),{method:"GET"}).catch(v).then(N)})(e).then((function(e){l({type:"GET_TODO",data:e.data})})).catch((function(e){l({type:"REPORT_ERROR",data:y[e.code]})}))},addNewTask:function(e,t){t?function(e,t){return fetch("/tasks/".concat(e),{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({task:t})}).catch(v).then(N)}(e,{name:t,done:!1}).then((function(e){l({type:"SET_TODO",data:e.data})})).catch((function(e){l({type:"NETWORK_ERROR",data:y[e.message]})})):l({type:"REPORT_ERROR",data:y.TODO_REQUIRED})},toggleTodo:function(e){o.tasks[e].done=!o.tasks[e].done;var t=o.tasks[e];j(o.username,e,t).then((function(e){l({type:"TOGGLE_TODO",data:e.data})})).catch((function(e){l({type:"REPORT_ERROR",data:y[e.code]})}))},deleteTask:function(e){var t,a;(t=o.username,a=e,fetch("/tasks/".concat(t,"/").concat(a),{method:"DELETE"}).catch(v).then(N)).then((function(e){var t=i(e.data);l({type:"DELETE_TODO",data:t})})).catch((function(e){l({type:"REPORT_ERROR",data:y[e.code]})}))},updateTask:function(e,t){var a=o.tasks[e];o.tasks[e].name=t,j(o.username,e,a).then((function(e){l({type:"UPDATE_TODO",data:e.data})})).catch((function(e){l({type:"REPORT_ERROR",data:y[e.code]})}))},filterTasksByStatus:function(e){l({type:"STATUS_FILTER",data:e})},sortTasksByOrder:function(e){var t="";e===m.ASCENDING?t=d():e===m.DESCENDING&&(t=E()),o.tasks=O(t),l({type:"ORDER_FILTER",data:e})},refreshTasks:function(){l({type:"REFRESH_TASKS"})},sortTasksByDone:function(e){var t={};e===m.DONE?t=f():e===m.NOTDONE&&(t=T()),o.tasks=O(t),l({type:"DONE_FILTER",data:e})}}},e.children)};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null,r.a.createElement(R,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.7ec95a95.chunk.js.map